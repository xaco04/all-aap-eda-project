---
- name: Detectar pods caídos en OpenShift
  hosts: localhost
  sources:
    - name: Obtener estado de los pods
      ansible.eda.kubernetes:
        kind: Pod
        namespace: "mi-namespace"  # Cambiar según el namespace deseado
  rules:
    - name: Detectar pod en estado de error
      condition: event.object.status.phase in ["Failed", "CrashLoopBackOff"]
      action:
        run_job_template:
          name: alertar_pod_caido.yml  # Playbook que envía una alerta o toma acción
